{"mappings":"qhBAAA,IAAAA,EAAAC,EAAA,S,aAIA,MAAMC,EAAWC,SAASC,cAAc,sBAClCC,EAAaF,SAASC,cAAc,oBACpCE,EAAIH,SAASC,cAAc,eAC3BG,EAAIJ,SAASC,cAAc,gBAC3BI,EAAIL,SAASC,cAAc,kBAC3BK,EAAIN,SAASC,cAAc,kBAEjC,IAAIM,EAAQ,KAEZR,EAASS,UAAW,EAEpB,MAAMC,EAAU,CACdC,YAAY,EACZC,WAAW,EACXC,YAAa,IAAIC,KACjBC,gBAAiB,EACjBC,QAAQC,GAEN,GAAIA,EAAa,IAAM,IAAIH,KACzBd,EAASS,UAAW,EACpBS,EAAAC,GAASC,OAAOC,QAAQ,0CACnB,CAmCL,SAASC,EAAeC,GAEtB,OADoBC,OAAOD,GACRE,SAAS,EAAG,I,CApCjCzB,EAASS,UAAW,EAEpBT,EAAS0B,iBAAiB,SAI1B,WACElB,EAAQmB,aAAY,KAClB3B,EAASS,UAAW,EAIpB,MAIMmB,EAJgB,IAAId,KACxBX,EAAWoB,MAAMM,QAAO,KAAO,MAC/BC,WACU,IAAIhB,MAAOgB,WAGjBC,KAAEA,EAAIC,MAAEA,EAAKC,QAAEA,EAAOC,QAAEA,GAuBlC,SAAmBC,GACjB,MAAMC,EAAS,IACTC,EAAkB,GAATD,EACTE,EAAgB,GAATD,EACPE,EAAa,GAAPD,EAENP,EAAOS,KAAKC,MAAMN,EAAKI,GACvBP,EAAQQ,KAAKC,MAAMN,EAAMI,EAAOD,GAChCL,EAAUO,KAAKC,MAAMN,EAAOI,EAAOD,EAAQD,GAC3CH,EAAUM,KAAKC,MAAMN,EAAQI,EAAOD,EAAQD,EAAUD,GAE5D,MAAO,C,KAAEL,E,MAAMC,E,QAAOC,E,QAASC,E,CAlCaQ,CAAUd,GAEpDxB,EAAEuC,UAAYZ,EAAO,GAAKT,EAAeS,GAAQA,EACjD1B,EAAEsC,UAAYX,EAAQ,GAAKV,EAAeU,GAASA,EACnD1B,EAAEqC,UAAYV,EAAU,GAAKX,EAAeW,GAAWA,EACvD1B,EAAEoC,UAAYT,EAAU,GAAKZ,EAAeY,GAAWA,EAEnDN,EAAW,MACbgB,cAAcpC,GACdR,EAASS,UAAW,E,GAErB,I,QA6BX,EAAAX,EAAA+C,SAAU1C,EAAYO","sources":["src/js/04-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\nimport 'flatpickr/dist/flatpickr.min.css';\nimport Notiflix from 'notiflix';\n\nconst startBtn = document.querySelector('button[data-start]');\nconst dateChosen = document.querySelector('#datetime-picker');\nconst d = document.querySelector('[data-days]');\nconst h = document.querySelector('[data-hours]');\nconst m = document.querySelector('[data-minutes]');\nconst s = document.querySelector('[data-seconds]');\n\nlet timer = null;\n\nstartBtn.disabled = true;\n\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDate) {\n    // const currentDate = new Date();\n    if (selectedDate[0] <= new Date()) {\n      startBtn.disabled = true;\n      Notiflix.Notify.failure('Please choose a date in the future');\n    } else {\n      startBtn.disabled = false;\n\n      startBtn.addEventListener('click', countdownTime);\n\n      // time counter\n\n      function countdownTime() {\n        timer = setInterval(() => {\n          startBtn.disabled = true;\n\n          // https://stackoverflow.com/questions/4310953/invalid-date-in-safari\n\n          const dateChoosenMs = new Date(\n            dateChosen.value.replace(/-/g, '/')\n          ).getTime();\n          const now = new Date().getTime();\n          const timeLeft = dateChoosenMs - now;\n\n          const { days, hours, minutes, seconds } = convertMs(timeLeft);\n\n          d.innerHTML = days < 10 ? addLeadingZero(days) : days;\n          h.innerHTML = hours < 10 ? addLeadingZero(hours) : hours;\n          m.innerHTML = minutes < 10 ? addLeadingZero(minutes) : minutes;\n          s.innerHTML = seconds < 10 ? addLeadingZero(seconds) : seconds;\n\n          if (timeLeft < 1000) {\n            clearInterval(timer);\n            startBtn.disabled = false;\n          }\n        }, 1000);\n      }\n\n      // addLeadingZero\n\n      function addLeadingZero(value) {\n        const stringValue = String(value);\n        return stringValue.padStart(2, '0');\n      }\n\n      // convert\n\n      function convertMs(ms) {\n        const second = 1000;\n        const minute = second * 60;\n        const hour = minute * 60;\n        const day = hour * 24;\n\n        const days = Math.floor(ms / day);\n        const hours = Math.floor((ms % day) / hour);\n        const minutes = Math.floor(((ms % day) % hour) / minute);\n        const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n        return { days, hours, minutes, seconds };\n      }\n    }\n  },\n};\n\nflatpickr(dateChosen, options);\n"],"names":["$fbklV","parcelRequire","$1d60dd97dce11292$var$startBtn","document","querySelector","$1d60dd97dce11292$var$dateChosen","$1d60dd97dce11292$var$d","$1d60dd97dce11292$var$h","$1d60dd97dce11292$var$m","$1d60dd97dce11292$var$s","$1d60dd97dce11292$var$timer","disabled","$1d60dd97dce11292$var$options","enableTime","time_24hr","defaultDate","Date","minuteIncrement","onClose","selectedDate","$parcel$interopDefault","$7Y9D8","Notify","failure","addLeadingZero","value","String","padStart","addEventListener","setInterval","timeLeft","replace","getTime","days","hours","minutes","seconds","ms","second","minute","hour","day","Math","floor","convertMs","innerHTML","clearInterval","default"],"version":3,"file":"04-timer.95e30296.js.map"}