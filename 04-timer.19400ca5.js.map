{"mappings":"iiBAAA,IAAAA,EAAAC,EAAA,S,aAIMC,EAAWC,SAASC,cAAc,sBAClCC,EAAaF,SAASC,cAAc,oBACpCE,EAAIH,SAASC,cAAc,eAC3BG,EAAIJ,SAASC,cAAc,gBAC3BI,EAAIL,SAASC,cAAc,kBAC3BK,EAAIN,SAASC,cAAc,kBAE7BM,EAAQ,KAEZR,EAASS,UAAW,EAEpB,IAAMC,EAAU,CACdC,YAAY,EACZC,WAAW,EACXC,YAAa,IAAIC,KACjBC,gBAAiB,EACjBC,QAAA,SAAQC,GAEN,GAAIA,EAAa,IAAM,IAAIH,KACzBd,EAASS,UAAW,EACpBS,EAAAC,GAASC,OAAOC,QAAQ,0CACnB,CAmCL,SAASC,EAAeC,GAEtB,OADoBC,OAAOD,GACRE,SAAS,EAAG,I,CApCjCzB,EAASS,UAAW,EAEpBT,EAAS0B,iBAAiB,SAI1B,WACElB,EAAQmB,aAAY,WAClB3B,EAASS,UAAW,EAIpB,IAIMmB,EAJgB,IAAId,KACxBX,EAAWoB,MAAMM,QAAO,KAAO,MAC/BC,WACU,IAAIhB,MAAOgB,UAGmBC,EAuB9C,SAAmBC,GACjB,IAAMC,EAAS,IACTC,EAAkB,GAATD,EACTE,EAAgB,GAATD,EACPE,EAAa,GAAPD,EAENE,EAAOC,KAAKC,MAAMP,EAAKI,GACvBI,EAAQF,KAAKC,MAAMP,EAAMI,EAAOD,GAChCM,EAAUH,KAAKC,MAAMP,EAAOI,EAAOD,EAAQD,GAC3CQ,EAAUJ,KAAKC,MAAMP,EAAQI,EAAOD,EAAQD,EAAUD,GAE5D,MAAO,CAAEI,OAAMG,QAAOC,UAASC,U,CAlCaC,CAAUf,GAA5CS,EAAkCN,EAAlCM,KAAMG,EAA4BT,EAA5BS,MAAOC,EAAqBV,EAArBU,QAASC,EAAYX,EAAZW,QAE9BtC,EAAEwC,UAAYP,EAAO,GAAKf,EAAee,GAAQA,EACjDhC,EAAEuC,UAAYJ,EAAQ,GAAKlB,EAAekB,GAASA,EACnDlC,EAAEsC,UAAYH,EAAU,GAAKnB,EAAemB,GAAWA,EACvDlC,EAAEqC,UAAYF,EAAU,GAAKpB,EAAeoB,GAAWA,EAEnDd,EAAW,MACbiB,cAAcrC,GACdR,EAASS,UAAW,E,GAErB,I,QA6BX,EAAAX,EAAAgD,SAAU3C,EAAYO,E","sources":["src/js/04-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\nimport 'flatpickr/dist/flatpickr.min.css';\nimport Notiflix from 'notiflix';\n\nconst startBtn = document.querySelector('button[data-start]');\nconst dateChosen = document.querySelector('#datetime-picker');\nconst d = document.querySelector('[data-days]');\nconst h = document.querySelector('[data-hours]');\nconst m = document.querySelector('[data-minutes]');\nconst s = document.querySelector('[data-seconds]');\n\nlet timer = null;\n\nstartBtn.disabled = true;\n\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDate) {\n    // const currentDate = new Date();\n    if (selectedDate[0] <= new Date()) {\n      startBtn.disabled = true;\n      Notiflix.Notify.failure('Please choose a date in the future');\n    } else {\n      startBtn.disabled = false;\n\n      startBtn.addEventListener('click', countdownTime);\n\n      // time counter\n\n      function countdownTime() {\n        timer = setInterval(() => {\n          startBtn.disabled = true;\n\n          // https://stackoverflow.com/questions/4310953/invalid-date-in-safari\n\n          const dateChoosenMs = new Date(\n            dateChosen.value.replace(/-/g, '/')\n          ).getTime();\n          const now = new Date().getTime();\n          const timeLeft = dateChoosenMs - now;\n\n          const { days, hours, minutes, seconds } = convertMs(timeLeft);\n\n          d.innerHTML = days < 10 ? addLeadingZero(days) : days;\n          h.innerHTML = hours < 10 ? addLeadingZero(hours) : hours;\n          m.innerHTML = minutes < 10 ? addLeadingZero(minutes) : minutes;\n          s.innerHTML = seconds < 10 ? addLeadingZero(seconds) : seconds;\n\n          if (timeLeft < 1000) {\n            clearInterval(timer);\n            startBtn.disabled = false;\n          }\n        }, 1000);\n      }\n\n      // addLeadingZero\n\n      function addLeadingZero(value) {\n        const stringValue = String(value);\n        return stringValue.padStart(2, '0');\n      }\n\n      // convert\n\n      function convertMs(ms) {\n        const second = 1000;\n        const minute = second * 60;\n        const hour = minute * 60;\n        const day = hour * 24;\n\n        const days = Math.floor(ms / day);\n        const hours = Math.floor((ms % day) / hour);\n        const minutes = Math.floor(((ms % day) % hour) / minute);\n        const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n        return { days, hours, minutes, seconds };\n      }\n    }\n  },\n};\n\nflatpickr(dateChosen, options);\n"],"names":["$dbdyf","parcelRequire","$78703e958999ac89$var$startBtn","document","querySelector","$78703e958999ac89$var$dateChosen","$78703e958999ac89$var$d","$78703e958999ac89$var$h","$78703e958999ac89$var$m","$78703e958999ac89$var$s","$78703e958999ac89$var$timer","disabled","$78703e958999ac89$var$options","enableTime","time_24hr","defaultDate","Date","minuteIncrement","onClose","selectedDate","$parcel$interopDefault","$6JpON","Notify","failure","addLeadingZero","value","String","padStart","addEventListener","setInterval","timeLeft","replace","getTime","ref","ms","second","minute","hour","day","days","Math","floor","hours","minutes","seconds","convertMs","innerHTML","clearInterval","default"],"version":3,"file":"04-timer.19400ca5.js.map"}